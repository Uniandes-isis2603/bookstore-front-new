<div class="container mt-4">
  <h2 class="text-center">Create a new book</h2>
  <form [formGroup]="bookForm" (ngSubmit)="createBook(bookForm.value)">
    <div class="form-group mx-sm-3 mb-2">
      <label for="name"> Name </label>
      <input
        novalidate
        id="name"
        class="form-control"
        formControlName="name"
        placeholder="Book Name"
      />
    </div>
    @if (
        bookForm.get('name')?.hasError('required') &&
        bookForm.get('name')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Name required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="authors"> Author </label>
      <select
        class="form-control"
        id="authors"
        rows="3"
        formControlName="authors"
      >
        <option value="">Select the author</option>
        @for (a of authors; track a) {
<option [value]="a.id">{{ a.name }}</option>
}
      </select>
    </div>
    @if (
        bookForm.get('authors')?.hasError('required') &&
        bookForm.get('authors')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Author required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="publishingDate"> Publishing Date </label>
      <input
        id="publishingDate"
        type="date"
        class="form-control"
        formControlName="publishingDate"
        placeholder="Book Publish Date"
      />
    </div>
    @if (
        bookForm.get('publishingDate')?.hasError('required') &&
        bookForm.get('publishingDate')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Date required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="description"> Description </label>
      <input
        id="description"
        type="text"
        class="form-control"
        formControlName="description"
        placeholder="Book Description"
      />
    </div>
    @if (
        bookForm.get('description')?.hasError('required') &&
        bookForm.get('description')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Description required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="isbn"> ISBN </label>
      <input
        id="isbn"
        type="text"
        class="form-control"
        formControlName="isbn"
        placeholder="Book ISBN"
      />
    </div>
    @if (
        bookForm.get('isbn')?.hasError('required') &&
        bookForm.get('isbn')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      ISBN required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="image"> Image (URL) </label>
      <input
        id="image"
        type="url"
        class="form-control"
        formControlName="image"
        placeholder="Book Image"
      />
    </div>
    @if (
        bookForm.get('image')?.hasError('required') &&
        bookForm.get('image')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Image required
    </div>
}

    <div class="form-group mx-sm-3 mb-2">
      <label for="editorial"> Editorial </label>
      <select class="form-control" id="editorial" formControlName="editorial">
        <option value="">Select the editorial</option>
        @for (e of editorials; track e) {
<option [ngValue]="e">{{ e.name }}</option>
}
      </select>
    </div>
    @if (
        bookForm.get('editorial')?.hasError('required') &&
        bookForm.get('editorial')?.touched
      ) {
<div
      class="alert alert-danger alert-dismissible fade show"
     
    >
      Editorial required
    </div>
}

    <div class="form-group mx-sm-3 mb-2" style="margin-bottom: 30px !important; margin-top: 15px;">
      <button type="button" class="btn btn-primary" [disabled]="bookForm.invalid" style="margin-right: 10px;">
        Create
      </button>
      <button
        type="submit"
        id="submit"
        class="btn btn-danger ml-3"
        (click)="cancelCreation()"
      >
        Cancel
      </button>
    </div>
  </form>
</div>